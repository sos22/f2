all: realall

-include config

.SUFFIXES:

include binaries.mk
include lib.mk
include spawnservice.mk
include test.mk
include test2.mk
include testjob.mk
include tests.mk
include tests/mk

# The all target only builds things which most people would want.  The
# coverage check and test suite are under a different target.
everything: realall covall testall profall

config: config.gen
	@./$< $@ > $@.tmp && mv -f $@.tmp $@
clean::
	rm -f config *.log *~ *.gcov *-c.gcda *-c.gcno

%: %.gen config
	@./$< $@ > $@.tmp && mv -f $@.tmp $@

# Specital target which is sometimes useful for forcing something to
# get rebuilt every time.  Mostly useful for makefile fragments,
# because if one of them is a direct dependency of .PHONY then you get
# an infinite loop.

.PHONY: _does_not_exist_
_does_not_exist_:
	@(! [ -e _does_not_exist_ ])
