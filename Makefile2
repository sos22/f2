all: realall

-include config

.SUFFIXES:

include coordinator.mk
include lib.mk
include spawnservice.mk
include storageservice.mk
include storageclient.mk
include storagefmt.mk
include storagespy.mk
include test.mk
include tests.mk
include tests/mk

# The all target only builds things which most people would want.  The
# coverage check and test suite are under a different target.
everything: realall covall testall

config: config.gen
	@./$< $@ > $@.tmp && mv -f $@.tmp $@
clean::
	rm -f config *.log *~ *.gcov *-c.gcda *-c.gcno

%: %.gen config
	@./$< $@ > $@.tmp && mv -f $@.tmp $@

